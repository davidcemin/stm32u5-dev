{
  "version": "2.0.0",
  "tasks": [
    {
      "label": "OpenOCD (B-U585I-IOT02A)",
      "type": "shell",
      "command": "openocd",
      "args": [
    "-f",
    "${env:ZEPHYR_BASE}/boards/st/b_u585i_iot02a/support/openocd.cfg"
        "-f",
        "${env:ZEPHYR_BASE}/boards/st/b_u585i_iot02a/support/openocd.cfg"
      ],
  "isBackground": true,
  "problemMatcher": {
    "pattern": [
      {
        "regexp": ".",
        "file": 1,
        "message": 0
      }
    ],
    "background": {
      "activeOnStart": true,
      "beginsPattern": ".*Open On-Chip Debugger.*",
      "endsPattern": ".*Listening on port 3333 for gdb connections.*"
    }
  }
},

    {
      "label": "terminate OpenOCD",
      "type": "shell",
      "command": "pkill",
      "args": ["-f", "openocd"],
      "problemMatcher": []
    }
  ]
}
